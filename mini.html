<html>
  <head><title>Speak</title></head>
  <body>
    <h1>Speak</h1>
    <p>The script below shows an easy way to get a web page to talk.</p>
    <form method="get">
      <p>Say:
	<input type=text name="msg" id="msg" value="hello">
	<input type="submit">
	<button onclick="speak(document.getElementById('msg').value); return false">Speak (in page)</button>
      </p>
    </form>
    <pre id="code"></pre>
    <script>
      // This function is all you need in order to speak text from any web page (in the default language).
      // Usage:
      //   speak("Hello there!");
  
      function speak(text) {
	if ('speechSynthesis' in window) {
	  window.speechSynthesis.speak(new SpeechSynthesisUtterance(text));
	}
      }
    </script>
    <script>
      // This is just to specify what to say
      var msg = 'Hey Kai! How are you?';
      var param = /[&?]msg.?=([^&]+)/.exec(location.search);
      if (param) {
	msg = decodeURIComponent(param[1]).replace(/\+/g, ' ');
      }
      document.getElementById('msg').value = msg;
      // Call the function to speak the specified text.
      speak(msg);
    </script>
    <script>
      document.getElementById('code').innerText = document.getElementsByTagName('script')[0].innerText;
    </script>
    <p>TODO: more advanced use: this does not work for Chinese yet:</p>
    <form method="get">
      <p>Say:
	<input type=text name="msg2" id="msg2" value="Chinese hello is 妳好">
	<input type="submit">
    <button onclick="void(speak(document.getElementById('msg2').value)); return false">Speak (in page)</button>
      </p>
    </form>
    <p>This simple web-based
      <a href="https://rawgit.com/mdn/web-speech-api/master/speak-easy-synthesis/index.html">speech syntesizer</a>
      from the
      <a href="https://github.com/mdn/web-speech-api">Web Speech API demos by MDN Web Docs</a>
      also handles language, pitch, and rate (but my version handles URL parameters...).
    </p>
  </body>
</html>
