
<html>
  <head><title>Speak</title></head>
  <body>
    <h1>Speak</h1>
    <p>The script below shows an easy way to get a web page to talk.</p>
    <form method="get">
      <p>Say:
	<input type=text name="msg" id="msg" value="hello">
	<input type="submit">
	<button onclick="speak(document.getElementById('msg').value)">Speak (iOS)</button>
      </p>
    </form>
    <pre id="code"></pre>
    <script>
      // This function is all you need in order to speak text from any web page.
      function speak(text) {
	if ('speechSynthesis' in window) {
	  window.speechSynthesis.speak(new SpeechSynthesisUtterance(text));
	}
      }
      // This is just to specify what to say
      var msg = 'Hey Kai! How are you?';
      var param = /[&?]msg=([^&]+)/.exec(location.search);
      if (param) {
	msg = decodeURIComponent(param[1]).replace(/\+/g, ' ');
      }
      document.getElementById('msg').value = msg;
      // Call the function to speak the specified text.
      speak(msg);
    </script>
    <script>
      document.getElementById('code').innerText = document.getElementsByTagName('script')[0].innerText;
    </script>
    <p>TODO: more advanced use: this doesn't work for Chinese yet:</p>
        <form method="get">
      <p>Say:
	<input type=text name="msg2" id="msg2" value="Chinese hello is 妳好">
	<input type="submit">
    <button onclick="void(speak(document.getElementById('msg2').value))">Speak (iOS)</button>
      </p>
    </form>

    
  </body>
</html>
