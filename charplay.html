<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Characters Game</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"></script>
    <script src="jquery.ui.touch-punch.min.js"></script>
    <style>
      .wordblock {
          list-style-type: none;
	  margin: 0;
	  padding: 0;
	  user-select: none; /* prevent text selection */
	  background-color: yellow;
      }
      .wordblock li {
	  margin: 0px 0px 0px 0;
	  padding: 0px;
	  width: 50px;
	  line-height: 50px;
	  float: left;
	  display: inline-block;
	  font-size: 3em;
	  text-align: center;
	  cursor: pointer;
	  font-family: arial;
	  background: white;
      }
      table { margin-top: -6px; }
      td { padding: 2px; margin: -2px; }
      td.unsolved { background-color: pink; }
      td.solved   { background-color: white; }
    </style>
    <script>
      $(function() {
	$('.wordblock').each(function(e) {
	  $(this).sortable();
	  $(this).disableSelection();

	  const word = $(this).text();
	  console.log(word);
	  let d_word = word.split('');
	  shuffle(d_word);

	  const lis = [];
	  for (let i = 0; i < d_word.length; i++) {
	    lis.push('<li class="unsolved">' + d_word[i] + '</li>')
	  }

	  $(this).html(lis.join(''));

	  $(this).mouseup(function() {
	    setTimeout(() => {
	      let r_word = '';
	      $(this).children('li').each(function(e) {
		r_word += $(this).text();
	      });
	      if (r_word == word) {
		console.log("YOU FOUND IT! : " + r_word);
		$(this).parent().removeClass('unsolved').addClass('solved');
	      } else {
		console.log("Keep trying!");
		$(this).parent().removeClass('solved').addClass('unsolved');
	      }
	    }, 0);
	  });
	});
      });
 
      function shuffle(a, b, c, d) {
	c = a.length;
	while (c) b = Math.random() * (--c + 1) | 0, d = a[c], a[c] = a[b], a[b] = d
      }
    </script>
  </head>
  <body>
    <table>
      <tr>
	<td class="unsolved">
	  <ul class="wordblock">般若波羅密多心經</ul>
	</td>
      </tr>
    </table>
    <table>
      <tr>
	<td class="unsolved">
	  <ul class="wordblock">觀自在菩薩</ul>
	</td>
      </tr>
    </table>
    <table>
      <tr>
	<td class="unsolved">
	  <ul class="wordblock">行深般若波羅密多時</ul>
	</td>
      </tr>
     </table>
    <table>
     <tr>
	<td class="unsolved">
	  <ul class="wordblock">照見五蘊皆空</ul>
	</td>
      </tr>
    </table>
    <table>
      <tr>
	<td class="unsolved">
	  <ul class="wordblock">度一切苦厄</ul>
	</td>
      </tr>
    </table>
    <p>
      Order characters by dragging them around.
    </p>
    <p>
      Initial version from  <a href="https://stackoverflow.com/questions/42333831/javascript-drag-letters-in-word-rearrange/42334240#42334240">Stack Overflow: drag letters in word (Rearrange)</a>
    </p>
  </body>
</html>





